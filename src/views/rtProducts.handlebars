<div class="container">
    <h1>Real Time Products List</h1>
    {{#each products}}
        <div class="prodRow">
            <h3 class="prodRow__title">{{this.title}}</h3>
            <p class="prodRow__desc">{{this.description}}</p>
            <p class="prodRow__price">U$S {{this.price}}</p>
        </div>
    {{/each}}
</div>


<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" crossorigin="anonymous"></script>
<script type="module">
    const url = ''; // vacío para localhost
    const options = {};

    const socketClient = io(url, options);

    socketClient.on('connect', ()=>{
        console.log(`socket.io Server connected: ${url}`);
    });

    socketClient.on('refreshProducts', prod=>{
        console.log(`Agregaría ${prod.title}`);
        let container = document.querySelector(".container");
        let prodRow = document.createElement('div');
        prodRow.classList.add('prodRow');
        let title = document.createElement('h3');
        title.classList.add('prodRow__title');
        title.textContent = prod.title;
        let desc = document.createElement('p');
        desc.classList.add('prodRow__desc')
        desc.textContent = prod.description;
        let price = document.createElement('p');
        price.classList.add('prodRow__price');
        price.textContent = `U$S ${prod.price}`;
        prodRow.appendChild(title);
        prodRow.appendChild(desc);
        prodRow.appendChild(price);
        
        container.appendChild(prodRow)
    })
</script>